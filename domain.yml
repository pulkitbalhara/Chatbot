version: "3.1"

intents:
  - greet
  - goodbye
  - scheme_apply
  - certificate_apply
  - get_emergency_contact
  - report_grievance
  - report_disaster
  - scheme_know
  - choose_scheme

slots:
  scheme_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: scheme_name
  phone_number:
    type: text
    influence_conversation: false  # Only fill during form
    mappings:
      - type: from_text
        conditions:
          - active_loop: scheme_apply_form  # Fill this slot only when form is active
  GPU_location:
    type: text
    influence_conversation: false  # Only fill during form
    mappings:
      - type: from_text
        conditions:
          - active_loop: scheme_apply_form  # Fill this slot only when form is active


responses:
  utter_greet:
    - text: "Hello, my name is SajiloSewak. How can I assist you today?"

  utter_options:
    - text: "I can help you with the following:"
      buttons:
        - title: "Know about a scheme"
          payload: '/know_scheme'
        - title: "Apply for a scheme"
          payload: '/scheme_apply'

  utter_list_of_schemes:
    - text: "Here are some schemes you can apply for:"
      buttons:
        - title: "Pradhan Mantri Awas Yojana"
          payload: '/choose_scheme{"scheme_name": "Pradhan Mantri Awas Yojana"}'
        - title: "Ayushman Bharat"
          payload: '/choose_scheme{"scheme_name": "Ayushman Bharat"}'
        - title: "PM Kisan Yojana"
          payload: '/choose_scheme{"scheme_name": "PM Kisan Yojana"}'
        - title: "Startup India"
          payload: '/choose_scheme{"scheme_name": "Startup India"}'
        - title: "Mudra Loan Scheme"
          payload: '/choose_scheme{"scheme_name": "Mudra Loan Scheme"}'

  utter_ask_scheme_name:
    - text: "Which scheme would you like to apply for?"

  utter_ask_phone_number:
    - text: "Please provide your contact number."

  utter_ask_GPU_location:
    - text: "What is your GPU location?"
    
  utter_details_submitted:
    - text: "Your application for the {scheme_name} scheme with contact number {phone_number} from {GPU_location} is successfully submitted. We will connect with you shortly."

  utter_goodbye:
  - text: "Bye"

forms:
  scheme_apply_form:
    required_slots:
      - phone_number
      - GPU_location

entities:
  - scheme_name
  - phone_number
  - GPU_location

actions:
  - action_submit_scheme_form
  - validate_scheme_apply_form
